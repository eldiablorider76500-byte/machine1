<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Slot 3B TikTok</title>

<style>
    body {
        background: radial-gradient(circle at top, #0e1425, #02040a);
        margin: 0;
        font-family: Arial, sans-serif;
        color: white;
        text-align: center;
    }

    .main {
        width: 1000px;
        margin: auto;
        margin-top: 80px;
        padding: 40px;
        border-radius: 20px;
        background: rgba(20, 0, 40, 0.7);
        box-shadow: 0 0 40px #6200ff40;
    }

    h1 {
        font-size: 32px;
        color: #ffdd55;
        text-shadow: 0 0 12px #ff00ff;
        letter-spacing: 2px;
        margin-bottom: 25px;
    }

    /* CADRE NÉON */
    .slot-frame {
        width: 650px;
        height: 250px;
        margin: auto;
        border-radius: 20px;
        padding: 20px;
        background: linear-gradient(45deg, #ff00ff, #ff8800, #ffee00);
        box-shadow: 0 0 20px #ff00ff;
    }

    .slot-inner {
        background: #0d0d16;
        border-radius: 15px;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 20px;
        padding: 15px;
    }

    .reel {
        width: 120px;
        height: 140px;
        background: #0a0a12;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: inset 0 0 20px #000;
    }

    .reel img {
        width: 100px;
        height: 100px;
    }

    .right-panel {
        float: right;
        width: 280px;
        text-align: left;
    }

    .panel-box {
        background: rgba(255, 255, 255, 0.08);
        padding: 14px;
        border-radius: 10px;
        margin-bottom: 18px;
    }

    .buttons {
        margin-top: 20px;
    }

    button {
        padding: 12px 25px;
        font-size: 17px;
        border-radius: 8px;
        border: none;
        cursor: pointer;
        font-weight: bold;
    }

    #btnAdd { background: #ffaa00; }
    #btnSpin { background: #00ff7f; }
</style>
</head>

<body>

<div class="main">

    <h1>SLOT 3B TIKTOK</h1>

    <div class="right-panel">
        <div class="panel-box" id="queueBox">
            <b>File d'attente :</b><br>
            0 joueur(s)
        </div>

        <div class="panel-box" id="historyBox">
            <b>Historique des gagnants :</b><br>
        </div>
    </div>

    <div class="slot-frame">
        <div class="slot-inner">
            <div class="reel" id="r1"></div>
            <div class="reel" id="r2"></div>
            <div class="reel" id="r3"></div>
            <div class="reel" id="r4"></div>
        </div>
    </div>

    <div class="buttons">
        <button id="btnAdd">AJOUTER (MANUEL)</button>
        <button id="btnSpin">SPIN</button>
    </div>

</div>

<script>
const icones = [
    "https://i.imgur.com/G8vdXLL.png",
    "https://i.imgur.com/vt2N6hE.png",
    "https://i.imgur.com/KkvyH2L.png",
    "https://i.imgur.com/6jQy2rA.png"
];

let queue = [];

const reels = [
    document.getElementById("r1"),
    document.getElementById("r2"),
    document.getElementById("r3"),
    document.getElementById("r4")
];

function majQueue() {
    document.getElementById("queueBox").innerHTML =
        "<b>File d'attente :</b><br>" + queue.length + " joueur(s)<br><br>" +
        queue.map(j => "• " + j).join("<br>");
}

document.getElementById("btnAdd").onclick = () => {
    const pseudo = "Joueur_" + Math.floor(Math.random() * 9999);
    queue.push(pseudo);
    majQueue();
};

document.getElementById("btnSpin").onclick = () => {
    if (queue.length === 0) {
        alert("Aucun joueur !");
        return;
    }

    const joueur = queue.shift();
    majQueue();

    let resultats = [];

    reels.forEach((r, i) => {
        r.innerHTML = "<img src='https://i.imgur.com/3oQZP61.gif' width='70'>";
        setTimeout(() => {
            const ic = icones[Math.floor(Math.random() * icones.length)];
            resultats[i] = ic;
            r.innerHTML = `<img src="${ic}">`;
        }, 400 + i * 300);
    });

    setTimeout(() => {
        const unique = new Set(resultats).size;

        let gagne =
            unique === 1 ? "MEGA WIN" :
            unique === 2 || unique === 3 ? "GIGA WIN" :
            "PERDU";

        document.getElementById("historyBox").innerHTML +=
            `<br><b>${joueur}</b> → ${gagne}`;

    }, 1800);
};
</script>

</body>
</html>
