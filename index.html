<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<title>Slot 3B TikTok</title>

<style>
* { margin:0; padding:0; box-sizing:border-box; }

body {
    font-family: Arial, sans-serif;
    background: radial-gradient(circle at top, #1d1b3a 0%, #0d0a19 70%);
    color:#fff;
    overflow-x:hidden;
}

/* ====== WRAPPER ====== */
.wrapper {
    width: 100%;
    max-width: 1500px;
    margin: 0 auto;
    padding: 40px 20px;
}

/* ====== TITRE ====== */
.title {
    text-align:center;
    font-size:48px;
    font-weight:800;
    letter-spacing:4px;
    margin-bottom:10px;
    color:#ffd86b;
    text-shadow:0 0 20px rgba(255,230,130,0.8);
}

.subtitle {
    text-align:center;
    font-size:16px;
    opacity:0.85;
    margin-bottom:20px;
}

/* ====== ZONE REELS ====== */
.reels-box {
    width: 100%;
    background: linear-gradient(45deg, #ff00b3, #ff6600, #ffee00, #3fff9b);
    padding: 12px;
    border-radius: 25px;
    margin: 20px 0;
}

.reels-inner {
    background: #080c15;
    border-radius: 18px;
    padding: 20px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    height: 320px;
}

.reel {
    width: 22%;
    height: 100%;
    background: #111827;
    border-radius: 15px;
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden;
}

.reel img {
    width: 85%;
    height: auto;
}

/* ====== PANNEAU DROITE ====== */
.side-panel {
    position:absolute;
    top:140px;
    right:60px;
    width: 360px;
}

.panel {
    background:#19142d;
    padding:15px 18px;
    border-radius:15px;
    margin-bottom:14px;
    box-shadow:0 0 12px rgba(0,0,0,0.4);
}

.panel-title {
    font-size:17px;
    color:#ffd86b;
    margin-bottom:6px;
}

/* ====== INPUTS ====== */
.inputs-area {
    margin-top:25px;
    background:#19142d;
    padding:18px;
    border-radius:15px;
}

label { font-size:15px; }

input {
    width:100%;
    padding:10px;
    margin-top:6px;
    margin-bottom:12px;
    border-radius:10px;
    border:none;
    background:#0e111b;
    color:white;
}

/* ====== BOUTONS ====== */
.btn-zone {
    margin-top:10px;
    display:flex;
    justify-content:center;
    gap:20px;
}

.btn {
    padding:14px 26px;
    border:none;
    border-radius:12px;
    font-size:18px;
    cursor:pointer;
    font-weight:bold;
    transition:0.2s;
}

.btn-add {
    background:#ffb800;
    color:#000;
}

.btn-add:hover { background:#ffd86b; }

.btn-spin {
    background:#00ffa6;
    color:#000;
}

.btn-spin:hover { background:#4dffbf; }

/* ====== WIN BANNER ====== */
.win-banner {
    position:absolute;
    top:10px;
    left:50%;
    transform:translateX(-50%);
    background:rgba(0,0,0,0.65);
    padding:10px 22px;
    border-radius:40px;
    font-size:20px;
    font-weight:bold;
    display:none;
}
</style>
</head>
<body>

<div class="wrapper">

<div class="title">SLOT 3B TIKTOK</div>
<div class="subtitle">
    4 mêmes cadeaux = gain • Loup = GIGA WIN • Moto = MEGA WIN
</div>

<!-- ==================== REELS ==================== -->
<div class="reels-box">
    <div class="reels-inner">
        <div class="reel"><img id="reel1" src="Cadeaux/IMG-20251120-WA0017.jpg"></div>
        <div class="reel"><img id="reel2" src="Cadeaux/IMG-20251120-WA0018.jpg"></div>
        <div class="reel"><img id="reel3" src="Cadeaux/IMG-20251120-WA0019.jpg"></div>
        <div class="reel"><img id="reel4" src="Cadeaux/IMG-20251120-WA0020.jpg"></div>
    </div>
</div>

<div id="winBanner" class="win-banner"></div>
<!-- ==================== PANNEAU DROITE ==================== -->
<div class="side-panel">

    <div class="panel">
        <div class="panel-title">File d'attente</div>
        <div id="queueCount">Nombre de joueurs : 0</div>
        <div id="queueList">Aucun joueur</div>
    </div>

    <div class="panel">
        <div class="panel-title">Gagnants (session)</div>
        <div>Total gagnants : <span id="winTotal">0</span></div>
        <div>Dernier gain : <span id="lastWin">-</span></div>
    </div>

    <div class="panel">
        <div class="panel-title">Statut TikTok</div>
        <div style="color:#ff5555;">● Déconnecté du serveur</div>
        <small>Mode manuel actif.</small>
    </div>

</div>


<!-- ==================== INPUTS EN BAS ==================== -->
<div class="inputs-area">

    <label>Pseudo TikTok :</label>
    <input type="text" id="playerName" placeholder="Pseudo…">

    <label>Valeur du cadeau (pièces) :</label>
    <input type="number" id="giftValue" placeholder="ex : 99">

    <small style="opacity:0.7;">
        Minimum 49 pièces pour jouer.<br>
        49–98 = 1 tour • 99–298 = 3 tours • 299–998 = 7 tours • 999+ = 70 tours.<br>
        Les cadeaux TikTok reçus ajoutent automatiquement le joueur dans la file (mode auto).
    </small>

    <div class="btn-zone">
        <button class="btn btn-add" onclick="addManual()">AJOUTER (MANUEL)</button>
        <button class="btn btn-spin" onclick="startSpin()">SPIN</button>
    </div>

</div>

</div> <!-- END WRAPPER -->
<script>
/* ================================
   CONFIG — Dossier des images
================================ */
const IMAGE_PATH = "Cadeaux/"; // ton dossier GitHub existe déjà

// Liste toutes tes images EXACTEMENT comme elles sont dans ton dossier
const SYMBOLS = [
    "IMG-20251120-WA0017.jpg",
    "IMG-20251120-WA0018.jpg",
    "IMG-20251120-WA0019.jpg",
    "IMG-20251120-WA0020.jpg",
    "IMG-20251120-WA0021.jpg",
    "IMG-20251120-WA0022.jpg",
    "IMG-20251120-WA0023.jpg",
    "IMG-20251120-WA0024.jpg",
    "IMG-20251120-WA0025.jpg",
    "IMG-20251120-WA0026.jpg",
    "IMG-20251120-WA0027.jpg",
    "IMG-20251120-WA0028.jpg",
    "IMG-20251120-WA0029.jpg",
    "IMG-20251120-WA0030.jpg",
    "IMG-20251120-WA0031.jpg",
    "IMG-20251120-WA0032.jpg",
    "IMG-20251120-WA0033.jpg",
    "IMG-20251120-WA0034.jpg",
    "IMG-20251120-WA0035.jpg",
    "IMG-20251120-WA0042.jpg"
];

// Sélecteurs
const playerNameDisplay = document.getElementById("playerNameDisplay");
const giftCoinsDisplay  = document.getElementById("giftCoinsDisplay");
const spinsLeftDisplay  = document.getElementById("spinsLeftDisplay");
const totalSpinsDisplay = document.getElementById("totalSpinsDisplay");
const lastWinDisplay    = document.getElementById("lastWin");

const reels = [
    document.getElementById("reel1"),
    document.getElementById("reel2"),
    document.getElementById("reel3"),
    document.getElementById("reel4")
];

let currentPlayer = "-";
let currentGift   = 0;
let spinsLeft     = 0;
let totalSpins    = 0;

let isSpinning = false;


/* ================================
   CALCUL DES TOURS
================================ */
function calculateSpins(coins) {
    if (coins >= 999) return 70;
    if (coins >= 299) return 7;
    if (coins >= 99)  return 3;
    if (coins >= 49)  return 1;
    return 0;
}


/* ================================
   AJOUT MANUEL DU JOUEUR
================================ */
function addManual() {
    const name = document.getElementById("playerName").value.trim();
    const coins = parseInt(document.getElementById("giftValue").value.trim());

    if (!name) {
        alert("Entre un pseudo.");
        return;
    }

    if (isNaN(coins) || coins < 49) {
        alert("Minimum 49 pièces.");
        return;
    }

    const gainedSpins = calculateSpins(coins);

    currentPlayer = name;
    currentGift = coins;
    spinsLeft += gainedSpins;

    updateDisplay();
}


/* ================================
   MAJ AFFICHAGE
================================ */
function updateDisplay() {
    playerNameDisplay.textContent = currentPlayer;
    giftCoinsDisplay.textContent = currentGift;
    spinsLeftDisplay.textContent = spinsLeft;
    totalSpinsDisplay.textContent = totalSpins;
}


/* ================================
   SPIN — Animation
================================ */
function randomSymbol() {
    return SYMBOLS[Math.floor(Math.random() * SYMBOLS.length)];
}

function startSpin() {
    if (isSpinning) return;

    if (spinsLeft <= 0) {
        alert("Plus de tours !");
        return;
    }

    isSpinning = true;
    spinsLeft--;
    totalSpins++;
    updateDisplay();

    let results = [];

    // Vitesse différente pour chaque rouleau
    let timers = [900, 1100, 1300, 1500];

    reels.forEach((slot, i) => {
        let shuffle = setInterval(() => {
            slot.src = IMAGE_PATH + randomSymbol();
        }, 80);

        setTimeout(() => {
            clearInterval(shuffle);

            let final = randomSymbol();
            slot.src = IMAGE_PATH + final;
            results.push(final);

            if (results.length === 4) {
                checkWin(results);
                isSpinning = false;
            }

        }, timers[i]);
    });
}


/* ================================
   CHECK SI 4 IDENTIQUES
================================ */
function checkWin(arr) {
    if (arr.every(v => v === arr[0])) {
        lastWinDisplay.textContent = "4 × " + arr[0];
    } else {
        lastWinDisplay.textContent = "-";
    }
}
</script>
<style>

/* ============================
   GLOBAL
============================ */
body {
    margin: 0;
    padding: 0;
    background: radial-gradient(circle at center,#0d0d1a,#05050a,#000);
    font-family: 'Poppins', sans-serif;
    color: white;
    text-align: center;
}

h1 {
    font-size: 48px;
    letter-spacing: 4px;
    font-weight: 800;
    margin-top: 50px;
    text-shadow: 0 0 20px #ffcc00, 0 0 40px #ff9900;
    color: #ffd75c;
}

.panel {
    width: 85%;
    margin: auto;
    padding: 40px;
    margin-top: 40px;
    background: rgba(10, 0, 20, 0.55);
    border-radius: 20px;
    box-shadow: 0 0 40px rgba(255,0,255,0.3);
}

/* ============================
   MACHINE À SOUS
============================ */
.machine-frame {
    width: 85%;
    margin: auto;
    background: linear-gradient(135deg,#ff00ff,#ff6f00,#ffe600,#00ff95);
    padding: 15px;
    border-radius: 25px;
    margin-top: 30px;
}

.reel-container {
    background: #0c0d17;
    border-radius: 25px;
    padding: 30px;
    display: flex;
    justify-content: space-evenly;
    align-items: center;
}

.reel {
    width: 180px;
    height: 220px;
    background: linear-gradient(#111522,#0b0d16);
    border-radius: 20px;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: inset 0 0 25px rgba(255,255,255,0.05);
}

.reel img {
    width: 150px;
    height: auto;
    object-fit: contain;
    filter: drop-shadow(0 0 8px rgba(255,255,255,0.3));
}

/* ============================
   PANNEAUX DROITE : Statut / Gagnants
============================ */
.side-panel {
    width: 430px;
    padding: 25px;
    background: rgba(20,10,40,0.6);
    border-radius: 20px;
    box-shadow: 0 0 20px rgba(255,255,255,0.1);
    text-align: left;
}

.side-panel h2 {
    font-size: 18px;
    font-weight: 700;
    margin-bottom: 10px;
    color: #ffdd66;
    text-shadow: 0 0 10px #ffbb00;
}

/* ============================
   FORMULAIRE
============================ */
.input-area {
    width: 80%;
    margin: auto;
    margin-top: 40px;
    background: rgba(15,0,30,0.6);
    padding: 25px;
    border-radius: 20px;
}

input {
    padding: 10px 15px;
    border-radius: 10px;
    border: none;
    outline: none;
    width: 260px;
    font-size: 16px;
    margin: 10px;
}

.button-wrapper {
    margin-top: 20px;
}

.button-yellow {
    background: linear-gradient(#ffba00,#ff9c00);
    padding: 14px 30px;
    border-radius: 15px;
    border: none;
    font-size: 18px;
    color: black;
    font-weight: 700;
    cursor: pointer;
    box-shadow: 0 0 18px rgba(255,200,0,0.7);
    transition: 0.2s;
}

.button-yellow:hover {
    transform: scale(1.08);
    box-shadow: 0 0 30px rgba(255,200,0,1);
}

.button-green {
    background: linear-gradient(#00ff8c,#00cc66);
    padding: 14px 25px;
    border-radius: 15px;
    border: none;
    font-size: 18px;
    color: black;
    font-weight: 700;
    cursor: pointer;
    box-shadow: 0 0 18px rgba(0,255,150,0.6);
    transition: 0.2s;
}

.button-green:hover {
    transform: scale(1.08);
    box-shadow: 0 0 30px rgba(0,255,150,1);
}

/* ============================
   TEXTES INFOS
============================ */
.info {
    margin-top: 10px;
    font-size: 13px;
    opacity: 0.8;
}

</style>
